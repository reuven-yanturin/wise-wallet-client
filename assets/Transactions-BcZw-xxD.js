import{a as b,b as $,e as R,V as x,f as j}from"./VTextField-C7ha6MKQ.js";import{_ as U,c as y,w as t,e as A,r as M,F as L,o as c,b as n,d as r,t as v,a as T,p as O,h as z,u as H,i as q,j as G,k as J,I as K,l as I,n as Q,m as X,q as E,s as Y,v as Z,V,x as S,g as B,y as ee}from"./index-Di8MZ21r.js";import{a as W,V as w,b as te}from"./VSpacer-C48U38tX.js";import{V as ae}from"./VTextarea-UEd3Pumc.js";import{m as ne,V as oe,a as D,b as se}from"./filter-DzKG9fpw.js";import{V as le}from"./VContainer-BHpC2ZFG.js";import{V as re}from"./VDataTableServer-Cu7m-bAA.js";const ie={name:"AccountsCarousel",data:()=>({loading:!1,accounts:[]}),async created(){await this.fetchAccounts()},methods:{async fetchAccounts(){this.loading=!0;try{const{data:e}=await b.accounts.getList();this.accounts=e,console.log(this.accounts,"accounts")}finally{this.loading=!1}}}},ce={class:"text-h4"};function ue(e,a,h,u,d,f){return c(),y(W,null,{default:t(()=>[(c(!0),A(L,null,M(e.accounts,(o,m)=>(c(),y(w,{key:m,cols:"12",md:"4"},{default:t(()=>[n($,{variant:"flat",color:"#191f2f",height:"150"},{default:t(()=>[n(R,{class:"mt-2 mb-3 text-body-1"},{default:t(()=>[r(v(o.name),1)]),_:2},1024),n(x,null,{default:t(()=>[T("h3",ce,v(e.formatPriceMixin(o.balance)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}const F=U(ie,[["render",ue],["__file","/Users/reuvenyanturin/Projects/WiseWallet/admin/src/components/accounts-carousel/AccountsCarousel.vue"]]),de=O({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ne({origin:"center center",scrollStrategy:"block",transition:{component:oe},zIndex:2400})},"VDialog"),fe=z()({name:"VDialog",props:de(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,a){let{emit:h,slots:u}=a;const d=H(e,"modelValue"),{scopeId:f}=q(),o=G();function m(l){var p,P;const g=l.relatedTarget,k=l.target;if(g!==k&&((p=o.value)!=null&&p.contentEl)&&((P=o.value)!=null&&P.globalTop)&&![document,o.value.contentEl].includes(k)&&!o.value.contentEl.contains(k)){const i=Z(o.value.contentEl);if(!i.length)return;const _=i[0],N=i[i.length-1];g===_?N.focus():_.focus()}}J(()=>{document.removeEventListener("focusin",m)}),K&&I(()=>d.value&&e.retainFocus,l=>{l?document.addEventListener("focusin",m):document.removeEventListener("focusin",m)},{immediate:!0});function C(){var l;h("afterEnter"),(l=o.value)!=null&&l.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function s(){h("afterLeave")}return I(d,async l=>{var g;l||(await Q(),(g=o.value.activatorEl)==null||g.focus({preventScroll:!0}))}),X(()=>{const l=D.filterProps(e),g=E({"aria-haspopup":"dialog"},e.activatorProps),k=E({tabindex:-1},e.contentProps);return n(D,E({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},l,{modelValue:d.value,"onUpdate:modelValue":p=>d.value=p,"aria-modal":"true",activatorProps:g,contentProps:k,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:C,onAfterLeave:s},f),{activator:u.activator,default:function(){for(var p=arguments.length,P=new Array(p),i=0;i<p;i++)P[i]=arguments[i];return n(Y,{root:"VDialog"},{default:()=>{var _;return[(_=u.default)==null?void 0:_.call(u,...P)]}})}})}),j({},o)}}),me={data:()=>({cookies:void 0,loading:!1,dialog:!1}),methods:{async save(){this.loading=!0;try{await b.transactions.upload({cookies:this.cookies}),this.cookies=void 0,this.dialog=!1,this.$emit("success")}finally{this.loading=!1}}}};function ge(e,a,h,u,d,f){return c(),y(fe,{modelValue:e.dialog,"onUpdate:modelValue":a[2]||(a[2]=o=>e.dialog=o),scrollable:"",width:"600"},{activator:t(({props:o})=>[n(V,E({color:"success",variant:"flat"},o),{default:t(()=>a[3]||(a[3]=[r(" Upload transactions ")])),_:2},1040)]),default:t(()=>[n($,{title:"Upload transactions"},{actions:t(()=>[n(te),n(V,{color:"primary",variant:"text",onClick:a[1]||(a[1]=o=>e.dialog=!1)},{default:t(()=>a[4]||(a[4]=[r(" Cancel ")])),_:1}),n(V,{color:"primary",variant:"flat",loading:e.loading,onClick:f.save},{default:t(()=>a[5]||(a[5]=[r(" Send ")])),_:1},8,["loading","onClick"])]),default:t(()=>[n(x,{class:"pt-2"},{default:t(()=>[n(ae,{modelValue:e.cookies,"onUpdate:modelValue":a[0]||(a[0]=o=>e.cookies=o),rows:"24",label:"Cookies",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const pe=U(me,[["render",ge],["__file","/Users/reuvenyanturin/Projects/WiseWallet/admin/src/pages/transactions/UploadTransactions.vue"]]),ve={name:"Transactions",components:{UploadTransactions:pe,AccountsCarousel:F},data:()=>({loading:!1,itemsPerPage:15,transactions:[],totalItems:0}),async created(){await this.getTransactions()},methods:{async getTransactions(){this.loading=!0;try{const{data:e}=await b.transactions.getAll({skip:0,take:this.itemsPerPage});this.transactions=e.transactions,this.totalItems=e.count}finally{this.loading=!1}},async deleteTransaction(e){this.loading=!0;try{await b.transactions.delete(e.id),await this.getTransactions()}finally{this.loading=!1}}}},ye={class:"d-flex"},Ve={key:0};function he(e,a,h,u,d,f){const o=F,m=S("UploadTransactions"),C=S("FontAwesomeIcon");return c(),y(le,{fluid:""},{default:t(()=>[n(W,null,{default:t(()=>[n(w,{cols:"12"},{default:t(()=>a[1]||(a[1]=[T("h1",null,"Transactions",-1)])),_:1}),n(w,{cols:"12",md:"4"},{default:t(()=>[n(o)]),_:1}),n(w,{cols:"12",class:"d-flex gap-4"},{default:t(()=>[n(V,{color:"primary",variant:"flat",to:{name:"transaction-create"}},{default:t(()=>a[2]||(a[2]=[r(" Add New ")])),_:1}),n(m,{onSuccess:f.getTransactions},null,8,["onSuccess"])]),_:1}),n(w,{cols:"12"},{default:t(()=>[n($,{variant:"flat",rounded:"lg"},{default:t(()=>[n(x,null,{default:t(()=>[n(re,{"items-per-page":e.itemsPerPage,"onUpdate:itemsPerPage":a[0]||(a[0]=s=>e.itemsPerPage=s),headers:[{title:"Id",key:"id"},{title:"Category",key:"category"},{title:"Type",key:"type"},{title:"Amount",key:"amount"},{title:"Account",key:"account"},{title:"Actions",key:"actions"}],items:e.transactions,"items-length":e.totalItems,loading:e.loading},{"item.category":t(({item:s})=>[r(v(s.category.name),1)]),"item.type":t(({item:s})=>[n(se,{color:s.type==="income"?"success":"error"},{prepend:t(()=>[s.type==="income"?(c(),y(C,{key:0,icon:"arrow-trend-up",class:"mr-2"})):B("",!0),s.type==="expense"?(c(),y(C,{key:1,icon:"arrow-trend-down",class:"mr-2"})):B("",!0)]),default:t(()=>[r(" "+v(s.type),1)]),_:2},1032,["color"])]),"item.amount":t(({item:s})=>[T("span",{class:ee({"text-success":s.type==="income","text-error":s.type==="expense"})},v(e.formatPriceMixin(s.amount)),3)]),"item.account":t(({item:s})=>[r(v(s.account.name),1)]),"item.actions":t(({item:s})=>[T("div",ye,[s.isDeleted?(c(),A("span",Ve,"deleted")):(c(),A(L,{key:1},[n(V,{to:{name:"transaction",params:{transactionId:s.id}}},{default:t(()=>a[3]||(a[3]=[r(" Show ")])),_:2},1032,["to"]),n(V,{onClick:l=>f.deleteTransaction(s)},{default:t(()=>a[4]||(a[4]=[r("delete")])),_:2},1032,["onClick"])],64))])]),_:1},8,["items-per-page","items","items-length","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const be=U(ve,[["render",he],["__file","/Users/reuvenyanturin/Projects/WiseWallet/admin/src/pages/transactions/Transactions.vue"]]);export{be as default};
