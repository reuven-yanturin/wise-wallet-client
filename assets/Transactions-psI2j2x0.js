import{a as C,b as $,e as Y,V as U,f as z}from"./VTextField-CXYa9z9U.js";import{_ as D,c as k,w as e,e as I,r as O,F,o as d,b as t,d as l,t as _,V as v,m as P,h as q,i as y,j as T,a as A,p as G,k as J,u as K,l as Q,n as X,q as Z,I as ee,s as W,v as te,x as ae,y as ne,z as oe,A as L,B as se,g as S}from"./index-CznYRJ-U.js";import{a as M,V as x,b as N}from"./VSpacer-UsLKS5RO.js";import{V as j,m as le,a as re,b as B,c as ie}from"./filter-B_rqCL4S.js";import{V as de}from"./VTextarea-WAYmlUfU.js";import{V as ue}from"./VContainer-Rwordy2o.js";import{V as ce}from"./VDataTableServer-DH5ANEyC.js";const fe={name:"AccountsWidget",data:()=>({loading:!1,accounts:[]}),async created(){await this.fetchAccounts()},methods:{async fetchAccounts(){this.loading=!0;try{const{data:a}=await C.accounts.getList();this.accounts=a}finally{this.loading=!1}}}},me={class:"text-h4"};function ge(a,n,h,u,c,f){return d(),k(M,null,{default:e(()=>[(d(!0),I(F,null,O(a.accounts,(o,m)=>(d(),k(x,{key:m,cols:"12",md:"4"},{default:e(()=>[t($,{variant:"flat",color:"#191f2f",height:"150",rounded:"lg"},{default:e(()=>[t(Y,{class:"mt-2 mb-3 text-body-1 d-flex align-center"},{default:e(()=>[l(_(o.name)+" ",1),t(N),t(j,null,{activator:e(({props:V})=>[t(v,P({icon:"mdi-dots-vertical",variant:"text",density:"comfortable",ref_for:!0},V),null,16)]),default:e(()=>[t(q,null,{default:e(()=>[t(y,{to:{name:"transaction-create",query:{type:"income",accountId:o.id}}},{default:e(()=>[t(T,null,{default:e(()=>[...n[0]||(n[0]=[l("Income")])]),_:1})]),_:2},1032,["to"]),t(y,{to:{name:"transaction-create",query:{type:"expense",accountId:o.id}}},{default:e(()=>[t(T,null,{default:e(()=>[...n[1]||(n[1]=[l("Expense")])]),_:1})]),_:2},1032,["to"]),t(y,{to:{name:"transaction-create",query:{type:"transfer",accountId:o.id}}},{default:e(()=>[t(T,null,{default:e(()=>[...n[2]||(n[2]=[l("Transfer")])]),_:1})]),_:2},1032,["to"])]),_:2},1024)]),_:2},1024)]),_:2},1024),t(U,null,{default:e(()=>[A("h3",me,_(a.formatPriceMixin(o.balance)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}const R=D(fe,[["render",ge],["__file","/Users/reuvenyanturin/Projects/WiseWallet/admin/src/components/AccountsWidget.vue"]]),pe=G({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...le({origin:"center center",scrollStrategy:"block",transition:{component:re},zIndex:2400})},"VDialog"),ye=J()({name:"VDialog",props:pe(),emits:{"update:modelValue":a=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(a,n){let{emit:h,slots:u}=n;const c=K(a,"modelValue"),{scopeId:f}=Q(),o=X();function m(r){var p,b;const g=r.relatedTarget,w=r.target;if(g!==w&&((p=o.value)!=null&&p.contentEl)&&((b=o.value)!=null&&b.globalTop)&&![document,o.value.contentEl].includes(w)&&!o.value.contentEl.contains(w)){const i=oe(o.value.contentEl);if(!i.length)return;const E=i[0],H=i[i.length-1];g===E?H.focus():E.focus()}}Z(()=>{document.removeEventListener("focusin",m)}),ee&&W(()=>c.value&&a.retainFocus,r=>{r?document.addEventListener("focusin",m):document.removeEventListener("focusin",m)},{immediate:!0});function V(){var r;h("afterEnter"),(r=o.value)!=null&&r.contentEl&&!o.value.contentEl.contains(document.activeElement)&&o.value.contentEl.focus({preventScroll:!0})}function s(){h("afterLeave")}return W(c,async r=>{var g;r||(await te(),(g=o.value.activatorEl)==null||g.focus({preventScroll:!0}))}),ae(()=>{const r=B.filterProps(a),g=P({"aria-haspopup":"dialog"},a.activatorProps),w=P({tabindex:-1},a.contentProps);return t(B,P({ref:o,class:["v-dialog",{"v-dialog--fullscreen":a.fullscreen,"v-dialog--scrollable":a.scrollable},a.class],style:a.style},r,{modelValue:c.value,"onUpdate:modelValue":p=>c.value=p,"aria-modal":"true",activatorProps:g,contentProps:w,height:a.fullscreen?void 0:a.height,width:a.fullscreen?void 0:a.width,maxHeight:a.fullscreen?void 0:a.maxHeight,maxWidth:a.fullscreen?void 0:a.maxWidth,role:"dialog",onAfterEnter:V,onAfterLeave:s},f),{activator:u.activator,default:function(){for(var p=arguments.length,b=new Array(p),i=0;i<p;i++)b[i]=arguments[i];return t(ne,{root:"VDialog"},{default:()=>{var E;return[(E=u.default)==null?void 0:E.call(u,...b)]}})}})}),z({},o)}}),ve={data:()=>({cookies:void 0,loading:!1,dialog:!1}),methods:{async save(){this.loading=!0;try{await C.transactions.upload({cookies:this.cookies}),this.cookies=void 0,this.dialog=!1,this.$emit("success")}finally{this.loading=!1}}}};function Ve(a,n,h,u,c,f){return d(),k(ye,{modelValue:a.dialog,"onUpdate:modelValue":n[2]||(n[2]=o=>a.dialog=o),scrollable:"",width:"600"},{activator:e(({props:o})=>[t(v,P({color:"success",variant:"flat"},o),{default:e(()=>n[3]||(n[3]=[l(" Upload transactions ")])),_:2},1040)]),default:e(()=>[t($,{title:"Upload transactions"},{actions:e(()=>[t(N),t(v,{color:"primary",variant:"text",onClick:n[1]||(n[1]=o=>a.dialog=!1)},{default:e(()=>n[4]||(n[4]=[l(" Cancel ")])),_:1}),t(v,{color:"primary",variant:"flat",loading:a.loading,onClick:f.save},{default:e(()=>n[5]||(n[5]=[l(" Send ")])),_:1},8,["loading","onClick"])]),default:e(()=>[t(U,{class:"pt-2"},{default:e(()=>[t(de,{modelValue:a.cookies,"onUpdate:modelValue":n[0]||(n[0]=o=>a.cookies=o),rows:"24",label:"Cookies",variant:"outlined","hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}const _e=D(ve,[["render",Ve],["__file","/Users/reuvenyanturin/Projects/WiseWallet/admin/src/pages/transactions/UploadTransactions.vue"]]),ke={name:"Transactions",components:{UploadTransactions:_e,AccountsWidget:R},data:()=>({loading:!1,itemsPerPage:50,transactions:[],totalItems:0}),async created(){await this.getTransactions()},methods:{async getTransactions(){this.loading=!0;try{const{data:a}=await C.transactions.getAll({skip:0,take:this.itemsPerPage});this.transactions=a.transactions,this.totalItems=a.count}finally{this.loading=!1}},async deleteTransaction(a){this.loading=!0;try{await C.transactions.delete(a.id),await this.getTransactions()}finally{this.loading=!1}}}},Pe={class:"d-flex"},Te={key:0};function he(a,n,h,u,c,f){const o=R,m=L("UploadTransactions"),V=L("FontAwesomeIcon");return d(),k(ue,{fluid:""},{default:e(()=>[t(M,null,{default:e(()=>[t(x,{cols:"12"},{default:e(()=>n[1]||(n[1]=[A("h1",null,"Transactions",-1)])),_:1}),t(x,{cols:"12"},{default:e(()=>[t(o)]),_:1}),t(x,{cols:"12",class:"d-flex gap-4"},{default:e(()=>[t(j,null,{activator:e(({props:s})=>[t(v,P({color:"primary",variant:"flat"},s),{default:e(()=>n[2]||(n[2]=[l(" Add New ")])),_:2},1040)]),default:e(()=>[t(q,null,{default:e(()=>[t(y,{to:{name:"transaction-create",query:{type:"income"}}},{default:e(()=>[t(T,null,{default:e(()=>n[3]||(n[3]=[l("Income")])),_:1})]),_:1}),t(y,{to:{name:"transaction-create",query:{type:"expense"}}},{default:e(()=>[t(T,null,{default:e(()=>n[4]||(n[4]=[l("Expense")])),_:1})]),_:1}),t(y,{to:{name:"transaction-create",query:{type:"transfer"}}},{default:e(()=>[t(T,null,{default:e(()=>n[5]||(n[5]=[l("Transfer")])),_:1})]),_:1})]),_:1})]),_:1}),t(m,{onSuccess:f.getTransactions},null,8,["onSuccess"])]),_:1}),t(x,{cols:"12"},{default:e(()=>[t($,{variant:"flat",rounded:"lg"},{default:e(()=>[t(U,null,{default:e(()=>[t(ce,{"items-per-page":a.itemsPerPage,"onUpdate:itemsPerPage":n[0]||(n[0]=s=>a.itemsPerPage=s),headers:[{title:"Id",key:"id"},{title:"Category",key:"category"},{title:"Amount",key:"amount"},{title:"Date",key:"date"},{title:"Type",key:"type"},{title:"Account",key:"account"},{title:"Actions",key:"actions"}],items:a.transactions,"items-length":a.totalItems,loading:a.loading},{"item.category":e(({item:s})=>[t(y,{title:s.category.name,subtitle:s.note,class:"pl-0"},null,8,["title","subtitle"])]),"item.amount":e(({item:s})=>[A("span",{class:se({"text-success":s.type==="income","text-error":s.type==="expense"})},_(a.formatPriceMixin(s.amount)),3)]),"item.date":e(({item:s})=>[l(_(a.$dayjs(s.date).format("DD MMM, YYYY HH:mm")),1)]),"item.type":e(({item:s})=>[t(ie,{color:s.type==="income"?"success":"error"},{prepend:e(()=>[s.type==="income"?(d(),k(V,{key:0,icon:"arrow-trend-up",class:"mr-2"})):S("",!0),s.type==="expense"?(d(),k(V,{key:1,icon:"arrow-trend-down",class:"mr-2"})):S("",!0)]),default:e(()=>[l(" "+_(s.type),1)]),_:2},1032,["color"])]),"item.account":e(({item:s})=>[l(_(s.account.name),1)]),"item.actions":e(({item:s})=>[A("div",Pe,[s.isDeleted?(d(),I("span",Te,"deleted")):(d(),I(F,{key:1},[t(v,{to:{name:"transaction",params:{transactionId:s.id}}},{default:e(()=>n[6]||(n[6]=[l(" Show ")])),_:2},1032,["to"]),t(v,{onClick:r=>f.deleteTransaction(s)},{default:e(()=>n[7]||(n[7]=[l("delete")])),_:2},1032,["onClick"])],64))])]),_:1},8,["items-per-page","items","items-length","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}const $e=D(ke,[["render",he],["__file","/Users/reuvenyanturin/Projects/WiseWallet/admin/src/pages/transactions/Transactions.vue"]]);export{$e as default};
